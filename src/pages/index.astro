---
import BlogCard from '@components/blog/BlogCard.astro';
import BaseLayout from '@layouts/BaseLayout.astro';
import { getSortedPosts } from '@utils/getSortedPosts';

const posts = await getSortedPosts();
const latestPosts = posts.slice(0, 3);
---

<BaseLayout
  title="Signal & Sprocket | Astro製の技術ブログ"
  description="Content Collectionsと静的配信を中心に、Astroで速いブログを構築するためのメモを公開しています。"
>
  <section class="card-surface relative overflow-hidden px-8 py-16 sm:px-16 sm:py-24">
    <!-- Decorative Elements -->
    <div class="absolute -right-20 -top-20 h-80 w-80 animate-float rounded-full bg-brand-500/10 blur-[100px]"></div>
    <div class="absolute -bottom-20 -left-20 h-72 w-72 animate-float rounded-full bg-emerald-500/10 blur-[100px] animate-delay-300"></div>

    <div class="relative z-10 mx-auto max-w-6xl text-center">
      <div class="animate-fade-in inline-flex items-center rounded-full bg-brand-50 px-3 py-1 text-xs font-bold tracking-widest text-brand-700 dark:bg-brand-900/30 dark:text-brand-300">
        ENGINEERING NOTEBOOK
      </div>
      
      <h1 class="animate-slide-up mt-8 text-balance text-5xl font-black leading-[1.1] tracking-tight sm:text-7xl">
        速く、壊れにくく、
        <span class="bg-gradient-to-r from-brand-600 to-emerald-500 bg-clip-text text-transparent">運用しやすい</span>
        Astroブログ
      </h1>
      
      <p class="animate-slide-up animate-delay-100 mt-8 text-lg leading-relaxed text-slate-600 dark:text-slate-400">
        Content Collections、Markdown拡張、全文検索、SEOの土台を揃えた、
        <br class="hidden sm:block" />
        モダンなブログの実装サンプルです。
      </p>
      
      <div class="animate-slide-up animate-delay-200 mt-12 flex flex-wrap justify-center gap-4">
        <a href="/blog/" class="btn-primary group">
          記事一覧を見る
          <svg xmlns="http://www.w3.org/2000/svg" class="ml-2 h-4 w-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
        <a href="/rss.xml" class="btn-outline">
          RSSを購読
        </a>
      </div>
    </div>
  </section>

  <section class="mt-20">
    <div class="mb-10 flex items-end justify-between gap-4">
      <div>
        <h2 class="text-3xl font-black tracking-tight sm:text-4xl">最新記事</h2>
        <p class="mt-2 text-slate-500">最近公開されたテクニカルノート</p>
      </div>
      <a class="group flex items-center gap-1 text-sm font-bold text-brand-600 hover:text-brand-700 dark:text-brand-400" href="/blog/">
        すべて見る
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {latestPosts.map((post) => <BlogCard post={post} />)}
    </div>
  </section>
</BaseLayout>
