---
import BlogCard from '@components/blog/BlogCard.astro';
import Search from '@components/blog/Search.astro';
import BaseLayout from '@layouts/BaseLayout.astro';
import { getSortedPosts } from '@utils/getSortedPosts';

const posts = await getSortedPosts();
---

<BaseLayout title="Blog | Signal & Sprocket" description="Astroブログの実装、運用、最適化についての記事一覧です。">
  <section class="mb-8">
    <h1 class="text-4xl">Blog</h1>
    <p class="mt-3 max-w-3xl text-sm leading-7 opacity-80 sm:text-base">
      SSG中心の設計、Content Collections、SEO、Cloudflare Pages運用まで、実装で得た知見をまとめています。
    </p>
  </section>

  <section class="grid gap-8 lg:grid-cols-[1fr_320px]">
    <div class="grid gap-6 md:grid-cols-2">
      {posts.map((post) => <BlogCard post={post} />)}
    </div>

    <aside class="space-y-4">
      <Search />
      <div class="card-surface p-4 text-sm leading-7 opacity-85">
        <h2 class="mb-2 text-lg">Archive</h2>
        <p>記事が増えたときはページネーションで閲覧できます。</p>
        <a class="mt-2 inline-block text-cyan-700 dark:text-cyan-300" href="/blog/page/1/">/blog/page/1/ へ</a>
      </div>
    </aside>
  </section>
</BaseLayout>
