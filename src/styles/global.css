@import 'remark-github-blockquote-alert/alert.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-display: 'Playfair Display', 'Times New Roman', serif;
    --font-body: 'Zen Kaku Gothic New', 'Hiragino Sans', 'Yu Gothic', sans-serif;
    
    /* Light Mode - Warm & Sophisticated */
    --bg-canvas: 252 251 247;
    --text-main: 15 23 42;
    --text-muted: 71 85 105;
    --surface: 255 255 255;
    --surface-2: 241 245 249;
    --line: 226 232 240;
    --accent: 14 165 233; /* brand-500 */
    --accent-soft: 224 242 254; /* brand-100 */
    --shadow-color: 0 0 0;
  }

  html.dark {
    /* Dark Mode - Deep & Elegant */
    --bg-canvas: 10 15 25;
    --text-main: 241 245 249;
    --text-muted: 148 163 184;
    --surface: 17 24 39;
    --surface-2: 31 41 55;
    --line: 31 41 55;
    --accent: 56 189 248; /* brand-400 */
    --accent-soft: 12 74 110; /* brand-900 */
    --shadow-color: 0 0 0;
  }

  html {
    scroll-behavior: smooth;
    background-color: rgb(var(--bg-canvas));
  }

  body {
    @apply antialiased selection:bg-brand-200 selection:text-brand-900 dark:selection:bg-brand-800 dark:selection:text-brand-100;
    font-family: var(--font-body);
    color: rgb(var(--text-main));
    line-height: 1.6;
    min-height: 100vh;
    background-image: 
      radial-gradient(circle at 0% 0%, rgba(var(--accent), 0.05) 0%, transparent 40%),
      radial-gradient(circle at 100% 100%, rgba(34, 197, 94, 0.05) 0%, transparent 40%);
    background-attachment: fixed;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: 700;
    letter-spacing: -0.01em;
  }

  a {
    @apply transition-all duration-200;
  }
}

@layer components {
  .pagefind-ui {
    color: rgb(var(--text-main));
  }

  .pagefind-ui__search-input {
    border: 1px solid rgb(var(--line));
    background: rgb(var(--surface));
    color: rgb(var(--text-main));
  }

  .pagefind-ui__search-input::placeholder {
    color: rgb(var(--text-muted));
    opacity: 0.92;
  }

  .pagefind-ui__search-input:focus {
    border-color: rgb(var(--accent));
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--accent), 0.22);
  }

  .pagefind-ui__result {
    border: 1px solid rgb(var(--line));
    border-radius: 14px;
    background: rgb(var(--surface));
    padding: 1rem 1rem 0.95rem;
  }

  .pagefind-ui__result-link,
  .pagefind-ui__result-title {
    color: rgb(var(--text-main));
  }

  .pagefind-ui__result-excerpt {
    color: rgb(var(--text-muted));
  }

  .pagefind-ui__result mark {
    border-radius: 0.35rem;
    background: rgba(var(--accent), 0.24);
    color: rgb(var(--text-main));
    padding-inline: 0.2rem;
  }

  html.dark .pagefind-ui__search-input {
    border-color: rgb(71 85 105 / 0.8);
    background: rgb(15 23 42 / 0.9);
    color: rgb(241 245 249);
  }

  html.dark .pagefind-ui__search-input::placeholder {
    color: rgb(148 163 184 / 0.92);
  }

  html.dark .pagefind-ui__result {
    border-color: rgb(71 85 105 / 0.72);
    background: rgb(15 23 42 / 0.92);
  }

  html.dark .pagefind-ui__result-link,
  html.dark .pagefind-ui__result-title {
    color: rgb(241 245 249);
  }

  html.dark .pagefind-ui__result-excerpt {
    color: rgb(203 213 225);
  }

  .site-shell {
    @apply min-h-screen flex flex-col;
  }

  .content-container {
    @apply mx-auto w-full px-4 sm:px-6 lg:px-10;
    max-width: min(1800px, 96vw);
  }

  .card-surface {
    background: rgb(var(--surface));
    border: 1px solid rgb(var(--line));
    @apply rounded-3xl transition-all duration-300;
    box-shadow: 0 4px 6px -1px rgba(var(--shadow-color), 0.05), 0 2px 4px -1px rgba(var(--shadow-color), 0.03);
  }

  .card-surface:hover {
    @apply translate-y-[-4px];
    box-shadow: 0 20px 25px -5px rgba(var(--shadow-color), 0.1), 0 10px 10px -5px rgba(var(--shadow-color), 0.04);
    border-color: rgba(var(--accent), 0.3);
  }

  .nav-link {
    @apply relative py-1 text-sm font-medium tracking-wide transition-colors;
    color: rgb(var(--text-muted));
  }

  .nav-link:hover {
    color: rgb(var(--text-main));
  }

  .nav-link::after {
    content: '';
    @apply absolute bottom-0 left-0 h-[2px] w-0 bg-brand-500 transition-all duration-300;
  }

  .nav-link:hover::after,
  .nav-link[aria-current='page']::after {
    @apply w-full;
  }

  .nav-link[aria-current='page'] {
    @apply text-brand-600 dark:text-brand-400 font-semibold;
  }

  .site-mark {
    @apply text-lg font-black tracking-tight transition-colors;
    font-family: var(--font-body);
    color: rgb(var(--text-main));
  }

  .site-mark:hover {
    color: rgb(var(--accent));
  }

  .header-pill {
    @apply mx-auto flex h-14 w-full items-center justify-between gap-3 rounded-full border px-3 sm:px-4;
    border-color: rgba(var(--line), 0.85);
    background:
      linear-gradient(140deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      0 18px 38px -24px rgba(15, 23, 42, 0.32);
  }

  .floating-nav-link {
    @apply inline-flex items-center rounded-full px-3 py-1.5 text-sm font-semibold transition-all duration-200;
    color: rgb(var(--text-muted));
  }

  .floating-nav-link:hover {
    background: rgba(var(--surface-2), 0.95);
    color: rgb(var(--text-main));
  }

  .floating-nav-link[aria-current='page'] {
    background: rgba(var(--accent), 0.14);
    color: rgb(var(--accent));
  }

  .header-tools {
    @apply ml-auto flex items-center gap-2;
  }

  .floating-search {
    @apply items-center gap-2 rounded-xl border px-3 py-1.5 text-sm font-medium transition-colors;
    min-width: 210px;
    border-color: rgba(var(--line), 0.9);
    background: rgba(var(--surface), 0.86);
    color: rgb(var(--text-muted));
  }

  .floating-search:hover {
    color: rgb(var(--text-main));
    border-color: rgba(var(--accent), 0.45);
    background: rgba(var(--surface), 0.98);
  }

  .shortcut-hint {
    @apply ml-auto rounded-md px-1.5 py-0.5 text-[11px] font-semibold;
    color: rgb(var(--text-muted));
    background: rgba(var(--surface-2), 0.9);
    border: 1px solid rgba(var(--line), 0.8);
  }

  .floating-icon-btn {
    @apply h-9 w-9 items-center justify-center rounded-xl border transition-colors;
    border-color: rgba(var(--line), 0.9);
    background: rgba(var(--surface), 0.86);
    color: rgb(var(--text-muted));
  }

  .floating-icon-btn:hover {
    color: rgb(var(--text-main));
    border-color: rgba(var(--accent), 0.45);
    background: rgba(var(--surface), 0.98);
  }

  .header-pill #theme-toggle {
    @apply h-9 w-9 rounded-xl border;
    border-color: rgba(var(--line), 0.9);
    background: rgba(var(--surface), 0.86);
    color: rgb(var(--text-muted));
  }

  .header-pill #theme-toggle:hover {
    color: rgb(var(--text-main));
    border-color: rgba(var(--accent), 0.45);
    background: rgba(var(--surface), 0.98);
  }

  html.dark .site-mark {
    color: rgb(241 245 249);
  }

  html.dark .site-mark:hover {
    color: rgb(255 255 255);
  }

  html.dark .header-pill {
    border-color: rgba(148, 163, 184, 0.2);
    background:
      linear-gradient(140deg, rgba(30, 41, 59, 0.95), rgba(17, 24, 39, 0.92));
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.08),
      0 18px 38px -22px rgba(2, 6, 23, 0.75);
  }

  html.dark .floating-nav-link {
    color: rgb(226 232 240);
  }

  html.dark .floating-nav-link:hover {
    @apply bg-slate-700/60 text-white;
  }

  html.dark .floating-nav-link[aria-current='page'] {
    @apply bg-slate-700 text-sky-200;
  }

  html.dark .floating-search {
    color: rgb(203 213 225);
    border-color: rgba(148, 163, 184, 0.28);
    background: rgba(15, 23, 42, 0.55);
  }

  html.dark .floating-search:hover {
    @apply text-slate-100;
    border-color: rgba(125, 211, 252, 0.45);
    background: rgba(15, 23, 42, 0.72);
  }

  html.dark .shortcut-hint {
    @apply text-slate-400;
    background: rgba(15, 23, 42, 0.9);
    border-color: rgba(148, 163, 184, 0.22);
  }

  html.dark .floating-icon-btn {
    color: rgb(203 213 225);
    border-color: rgba(148, 163, 184, 0.3);
    background: rgba(15, 23, 42, 0.55);
  }

  html.dark .floating-icon-btn:hover {
    @apply text-slate-100;
    border-color: rgba(125, 211, 252, 0.45);
    background: rgba(15, 23, 42, 0.75);
  }

  html.dark .header-pill #theme-toggle {
    color: rgb(203 213 225);
    border-color: rgba(148, 163, 184, 0.3);
    background: rgba(15, 23, 42, 0.55);
  }

  html.dark .header-pill #theme-toggle:hover {
    @apply text-slate-100;
    border-color: rgba(125, 211, 252, 0.45);
    background: rgba(15, 23, 42, 0.75);
  }

  .site-search-dialog {
    width: min(860px, calc(100vw - 2rem));
    margin: 8vh auto 0;
    border: none;
    background: transparent;
    padding: 0;
    color: rgb(var(--text-main));
  }

  .site-search-dialog::backdrop {
    background: rgba(2, 6, 23, 0.62);
    backdrop-filter: blur(6px);
  }

  .search-modal-panel {
    @apply rounded-3xl p-4 sm:p-6;

    max-height: min(78vh, 760px);
    overflow: auto;
  }

  .search-modal-head {
    @apply mb-4 flex items-center justify-between gap-4;
  }

  .search-modal-close {
    @apply inline-flex items-center rounded-xl border px-3 py-1.5 text-sm font-semibold transition-colors;

    border-color: rgba(var(--line), 0.9);
    background: rgba(var(--surface), 0.9);
    color: rgb(var(--text-muted));
  }

  .search-modal-close:hover {
    color: rgb(var(--text-main));
    border-color: rgba(var(--accent), 0.45);
  }

  html.dark .search-modal-close {
    color: rgb(203 213 225);
    border-color: rgba(148, 163, 184, 0.3);
    background: rgba(15, 23, 42, 0.55);
  }

  html.dark .search-modal-close:hover {
    @apply text-slate-100;

    border-color: rgba(125, 211, 252, 0.45);
    background: rgba(15, 23, 42, 0.75);
  }

  .chip {
    @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold transition-all;
    border: 1px solid rgb(var(--line));
    background: rgb(var(--surface-2));
    color: rgb(var(--text-muted));
  }

  .chip:hover {
    @apply border-brand-300 text-brand-600;
    background: rgb(var(--accent-soft));
  }

  .btn-primary {
    @apply inline-flex items-center justify-center rounded-2xl px-6 py-3 text-sm font-bold text-white transition-all active:scale-95;
    background: rgb(var(--accent));
    box-shadow: 0 10px 15px -3px rgba(var(--accent), 0.3);
  }

  .btn-primary:hover {
    @apply brightness-110;
    box-shadow: 0 20px 25px -5px rgba(var(--accent), 0.4);
  }

  .btn-outline {
    @apply inline-flex items-center justify-center rounded-2xl px-6 py-3 text-sm font-bold transition-all active:scale-95;
    border: 2px solid rgb(var(--line));
    background: transparent;
  }

  .btn-outline:hover {
    @apply border-brand-500 text-brand-600;
    background: rgb(var(--accent-soft));
  }

  .prose {
    @apply text-slate-700 dark:text-slate-300;
    max-width: 74ch;
  }

  .prose pre {
    @apply rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm;
  }

  .prose h2 {
    @apply mt-12 mb-6 border-b pb-2 border-slate-100 dark:border-slate-800;
  }

  .markdown-alert {
    @apply my-6 rounded-2xl border-l-8 p-4 shadow-sm !important;
  }
}

/* Custom Utilities */
@layer utilities {
  .search-modal-open {
    overflow: hidden;
  }

  .glass-header {
    @apply fixed inset-x-0 top-0 z-50 pt-3 transition-transform duration-300 ease-out;
    pointer-events: none;
  }

  .glass-header > .content-container {
    pointer-events: auto;
  }

  .header-hidden {
    transform: translateY(calc(-100% - 0.75rem));
  }
  
  .text-balance {
    text-wrap: balance;
  }

  .animate-delay-100 { animation-delay: 100ms; }
  .animate-delay-200 { animation-delay: 200ms; }
  .animate-delay-300 { animation-delay: 300ms; }
}
